:root{
  --brand:#2F8FFF;
  --bg: #dadce3;
  --card: #eaecef;
  --text:#0F172A;
  --sub:#64748B;
  --border: #d8dde3;
  --ok:#16A34A;
  --warn:#F59E0B;
  --ga-width: 260px;         /* длина стрелки */
  --ga-height: 13px;        /* высота области */
  --ga-z: 2147483000;        /* поверх всего */
  --ga-hue: 214deg;          /* цвет (синий) */
  --ga-alpha: 0.9;
  --ga-dot-size: 36px;       /* размер пульса */
  --ga-line-thick: 4px;      /* толщина линии */


  /* параметры подсказки */
  --coach-len: 270px;     /* длина линии */
  --coach-rot: -48deg;    /* угол наклона вверх */
  --coach-shift-x: 1800px;   /* сдвиг по X */
  --coach-shift-y: 1090px; /* сдвиг по Y */
}

*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:14px/1.4 'Segoe UI','Inter','Roboto',system-ui,sans-serif;
}

.wrap{max-width:1100px;margin:24px auto;padding:0 16px;display:flex;flex-direction:column;gap:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:12px 16px}
.title{font-size:22px;margin:0;font-weight:700}
.toolbar{display:flex;align-items:center;gap:10px}
.input{padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);min-width:280px;color:var(--text)}
.grow{flex:1}

/* Кнопки */
.btn{
  position:relative;
  border:none;
  border-radius:12px;
  padding:10px 14px;
  font-weight:700;
  cursor:pointer;
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  gap:8px;
  transition:transform .18s ease, box-shadow .18s ease, background-position .25s ease;
  background:linear-gradient(180deg, #2F8FFF 0%, #1F6FE5 100%);
  color:#fff;
  box-shadow:0 6px 14px rgba(47,143,255,.24);
  background-size:100% 100%;
}
.btn:hover{
  transform:translateY(-2px) scale(1.02);
  box-shadow:0 10px 22px rgba(47,143,255,.28);
  background-position:0 12%;
}
.btn:active{
  transform:translateY(0) scale(.99);
  box-shadow:0 4px 10px rgba(47,143,255,.22);
}
.btn.ghost{
  background:transparent;
  color:var(--text);
  border:1px solid var(--border);
  box-shadow:none;
}
.btn.ghost:hover{
  transform:none;
  box-shadow:0 4px 12px rgba(15,23,42,.08);
}

/* небольшой «блик» при ховере */
.btn::after{
  content:"";
  position:absolute; inset:0;
  background:radial-gradient(circle at var(--mx,50%) var(--my,50%), rgba(255,255,255,.28), transparent 40%);
  opacity:0; transition:opacity .2s ease;
  border-radius:inherit;
  pointer-events:none;
}
.btn:hover::after{ opacity:1 }

/* Таблица */
.table-card{padding:0;overflow:hidden}
.table-head,.row{
  display:grid;
  grid-template-columns:110px 130px 1fr 1fr 1.2fr 140px;
  gap:12px;
  align-items:center;
}
.table-head{
  padding:12px 16px;
  font-weight:700;
  border-bottom:1px solid var(--border);
  background:linear-gradient(180deg, #ffffff, #a5bedd);
}
.table-body{ display:flex; flex-direction:column; }

/* Строки: стартовое состояние и вход с «падением сверху» */
.row{
  padding:12px 16px;

  background:var(--card);
  opacity:0;
  transform:translateY(-10px);
  will-change:transform, opacity;
  /* задержка — из JS кладём порядковый индекс в --i */
  animation:dropIn .45s cubic-bezier(.2,.8,.2,1) both;
  animation-delay: calc(var(--i, 0) * 60ms);
}


/* «Онлайн/Оффлайн» */
.badge{
  display:inline-flex; align-items:center; gap:8px;
  font-weight:600; color:var(--sub);
}
.dot{ width:10px; height:10px; border-radius:50% }
.dot.ok{ background:var(--ok) }
.dot.warn{ background:var(--warn) }

/* Ячейки действий */
.col.action{ display:flex; gap:8px; justify-content:flex-start }
a.btn.install{
  font-size:12px;        /* было 14 — поднимем */
  font-weight:300;       /* жирнее для читаемости */
  letter-spacing:.3px;   /* слегка разрежаем */
  text-shadow:0 1px 0 rgba(0,0,0,.25); /* тонкая тень для контраста на градиенте */
  padding:10px 14px;     /* немного больше кликабельная зона */
}

/* Футер */
.footer{ display:flex; align-items:center; justify-content:space-between; padding:12px 16px; }
.muted{ color:var(--sub) }

/* Splash/прогресс */
.splash{
  height:8px;
  background: #1c61c5;
  border-radius:6px;
  overflow:hidden;
  margin-top:8px;
}
.bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg, #2F8FFF, #74B4FF);
  transition:width .3s ease;
}

/* Подсказка («коуч»), выстреливает снизу вверх и рисует кривую */
.coach{
  position:relative;
  margin-top:12px;
  display:flex;
  align-items:flex-start;
  gap:12px;
  opacity:0;
  transform:translateY(14px);
  pointer-events:none;
}
.coach.reveal{
  opacity:1;
  transform:translateY(0);
  transition: opacity .35s ease, transform .35s ease;
  pointer-events:auto;
}
.coach .bubble{
  background: #1d60b3;
  color:#fff;
  padding:10px 12px;
  border-radius:10px;
  box-shadow:0 6px 20px rgba(2,6,23,.22);
  transform-origin:50% 100%;
  animation:pop .35s ease both;
  animation-delay:.12s;
}
@keyframes pop{ from{ transform:scale(.92); } to{ transform:scale(1); } }

.coach-curve{
  position:relative;
  width:var(--coach-len);
  height:130px;
  transform: translate(var(--coach-shift-x), var(--coach-shift-y)) rotate(var(--coach-rot));
}
.coach-curve svg{ width:100%; height:100%; overflow:visible }
.coach-curve .curve{
  fill:none;
  stroke:#1F6FE5;
  stroke-width:3;
  stroke-linecap:round;
  stroke-dasharray: 400;
  stroke-dashoffset: 400;
}
.coach.reveal .coach-curve .curve{
  animation:draw .7s cubic-bezier(.3,.8,.2,1) .05s forwards;
}
@keyframes draw{ to{ stroke-dashoffset:0; }}

/* «пульс» можно включить при желании */
.coach-pulse{
  position:absolute; right:130px; bottom: 28px;
  width:14px;height:14px;border-radius:50%;background:var(--brand);
  box-shadow:0 0 0 0 rgba(47,143,255,.6);
  align-self:flex-start;
  animation:pulse 1.4s ease-out infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(47,143,255,.6)}
  100%{box-shadow:0 0 0 24px rgba(47,143,255,0)}
}

/* Анимация входа строки */
@keyframes dropIn{
  from{ opacity:0; transform:translateY(-10px) }
  to{ opacity:1; transform:translateY(0) }
}

/* Учет предпочтений доступности */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important }
  .row{ opacity:1 !important; transform:none !important }
}

/* На маленьких экранах убираем линию, чтобы не мешала */
@media (max-width:900px), (max-height:500px){
  .coach-curve{display:none}
}



/* === Coach (прямая стрелка справа) === */
#coach.coach-fixed{
  position:fixed;
  inset: auto clamp(16px, 3vw, 36px) clamp(16px, 3vw, 36px) auto; /* top right */
  top: clamp(16px, 6vh, 48px);
  z-index: 2147483000;
  display:flex;
  align-items:flex-start;
  gap: 12px;
  pointer-events:none;
  opacity:0;
  transform: translateY(40px);
}
#coach.coach-fixed.reveal{
  opacity:1;
  transform: translateY(0);
  transition: opacity .45s ease, transform .45s cubic-bezier(.22,1,.36,1);
}

/* вертикальная прямая линия со стрелкой */
.coach-line{
  position:relative;
  width: clamp(48px, 5vw, 64px);
  height: clamp(180px, 28vh, 320px);
}
.coach-line svg{ width:100%; height:100%; overflow:visible }
.coach-line .line{
  fill:none;
  stroke: hsl(214deg 85% 48% / 0.95);
  stroke-width: 3.5;
  stroke-linecap: round;
  stroke-dasharray: 600;
  stroke-dashoffset: 600;
  animation: drawLine 1.2s ease forwards .15s;
}
@keyframes drawLine{
  to{ stroke-dashoffset: 0; }
}

/* пульсирующая точка снизу */
.coach-line .pulse-dot{
  position:absolute;
  left: 50%;
  bottom: 0;
  width: var(--ga-dot-size, 14px);
  height: var(--ga-dot-size, 14px);
  translate:-50% 50%;
  border-radius:50%;
  background: hsl(214deg 85% 48%);
  box-shadow: 0 0 0 0 hsl(214deg 85% 48% / .5);
  animation: pulse 1.8s ease-out infinite .35s;
}
@keyframes pulse{
  0%   { box-shadow: 0 0 0 0 hsl(214deg 85% 48% / .45); }
  70%  { box-shadow: 0 0 0 12px hsl(214deg 85% 48% / 0); }
  100% { box-shadow: 0 0 0 0 hsl(214deg 85% 48% / 0); }
}

/* облачко-подсказка справа от линии */
#coach .bubble{
  max-width: clamp(220px, 24vw, 340px);
  background: white;
  color: var(--text);
  border:1px solid var(--border);
  border-radius: 14px;
  padding: 10px 12px;
  box-shadow: 0 6px 22px rgb(0 0 0 / .08);
  transform-origin: bottom right;
  animation: pop .32s ease both .35s;
}
#coach .bubble strong{ color: hsl(214deg 85% 42%); }
@keyframes pop{ from{ transform:scale(.92); opacity:.0 } to{ transform:scale(1); opacity:1 } }

/* скрыть старую кривую если она была */
#coach .coach-curve{ display:none !important }

@media (prefers-reduced-motion: reduce){
  #coach.coach-fixed{ transform:none !important; }
  .coach-line .line{ animation:none !important; stroke-dashoffset:0 !important }
  .coach-line .pulse-dot{ animation:none !important }
}



/* === Coach positioning knobs === */
:root{
  --coach-top: 520px;    /* расстояние от верхнего края окна */
  --coach-right: 228px;   /* расстояние от правого края окна */
}

#coach.coach-fixed{
  position:fixed;
  top: var(--coach-top);
  right: var(--coach-right);
  left: auto;
  bottom: auto;
  z-index: 2147483000;
  display:flex;
  align-items:flex-start;
  gap: 12px;
  pointer-events:none;
  opacity:0;
  transform: translateY(40px);
}
#coach.coach-fixed.reveal{
  opacity:1;
  transform: translateY(0);
  transition: opacity .45s ease, transform .45s cubic-bezier(.22,1,.36,1);
}

/* вертикальная прямая линия со стрелкой */
.coach-line{
  position:relative;
  width: clamp(48px, 5vw, 64px);
  height: clamp(180px, 28vh, 320px);
}
.coach-line svg{ width:100%; height:100%; overflow:visible }
.coach-line .line{
  fill:none;
  stroke: hsl(214deg 85% 48% / 0.95);
  stroke-width: 3.5;
  stroke-linecap: round;
  stroke-dasharray: 600;
  stroke-dashoffset: 600;
  animation: drawLine 1.2s ease forwards .15s;
}
@keyframes drawLine{ to{ stroke-dashoffset: 0; } }

/* SVG-версия пульса у основания стрелки — всегда точно в начале линии */
.coach-line .pulse-core{
  fill: hsl(214deg 85% 48%);
}
.coach-line .pulse-ring{
  fill: none;
  stroke: hsl(214deg 85% 48% / .45);
  stroke-width: 2;
  transform-origin: center;
  animation: ring 1.8s ease-out infinite .35s;
}
/* Пульсация кружка в начале стрелки */
@keyframes ring{
  0%   { r: 3; opacity: .9; }
  70%  { r: 24; opacity: 0; }
  100% { r: 3; opacity: 0; }
}

/* облачко-подсказка справа от линии */
#coach .bubble{
  max-width: clamp(220px, 24vw, 340px);
  background: white;
  color: var(--text);
  border:1px solid var(--border);
  border-radius: 14px;
  padding: 10px 12px;
  box-shadow: 0 6px 22px rgb(0 0 0 / .08);
  transform-origin: bottom right;
  animation: pop .32s ease both .35s;
}
#coach .bubble strong{ color: hsl(214deg 85% 42%); }
@keyframes pop{ from{ transform:scale(.92); opacity:.0 } to{ transform:scale(1); opacity:1 } }

/* скрыть старую кривую если вдруг осталась */
#coach .coach-curve{ display:none !important }

@media (prefers-reduced-motion: reduce){
  #coach.coach-fixed{ transform:none !important; }
  .coach-line .line{ animation:none !important; stroke-dashoffset:0 !important }
  .coach-line .pulse-ring{ animation:none !important }
}
